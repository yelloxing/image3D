/*!
* image3D - üçä ‰ΩøÁî®webGLÁªòÂà∂‰∏âÁª¥ÂõæÁâá„ÄÇDrawing three-dimensional images using webGL.
* git+https://github.com/yelloxing/image3D.git
*
* author ÂøÉÂè∂
*
* version 2.0.3-alpha
*
* build Thu Apr 11 2019
*
* Copyright yelloxing
* Released under the MIT license
*
* Date:Wed Jan 08 2020 14:27:24 GMT+0800 (GMT+08:00)
*/

"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol==="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};(function(){"use strict";var f=function r(t,e,n){var i=t.createShader(e);if(i==null)throw new Error("Unable to create shader!");t.shaderSource(i,n);t.compileShader(i);if(!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error("Failed to compile shader:"+t.getShaderInfoLog(i));return i};var o=function r(t,e,n){var i=f(t,t.VERTEX_SHADER,e),o=f(t,t.FRAGMENT_SHADER,n);var a=t.createProgram();t.attachShader(a,i);t.attachShader(a,o);t.linkProgram(a);if(!t.getProgramParameter(a,t.LINK_STATUS))throw new Error("Failed to link program: "+t.getProgramInfoLog(a));t.useProgram(a);return a};var a=function r(t,e){var n=t.createBuffer(),i=e?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER;t.bindBuffer(i,n);return n};var c=function r(t,e,n,i){var o=i?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER;t.bufferData(o,e,n)};var A=function r(t,e,n,i,o,a,f){t.vertexAttribPointer(e,n,i,f||false,o||0,a||0);t.enableVertexAttribArray(e)};var E=function r(t,e,n){var i=t.createTexture();if(typeof n=="number"){t.activeTexture(t["TEXTURE"+n])}t.bindTexture(e,i);return i};var s=function r(t,e,n,i,o,a){i={rgb:t.RGB,rgba:t.RGBA,alpha:t.ALPHA}[i]||t.RGBA;t.texImage2D(e,n||0,i,i,{}[o]||t.UNSIGNED_BYTE,a)};var g=function r(t,e,n,i,o,a,f,u,E){i={rgb:t.RGB,rgba:t.RGBA,alpha:t.ALPHA}[i]||t.RGBA;n=n||0;o={}[o]||t.UNSIGNED_BYTE;var m=[t.TEXTURE_CUBE_MAP_POSITIVE_X,t.TEXTURE_CUBE_MAP_NEGATIVE_X,t.TEXTURE_CUBE_MAP_POSITIVE_Y,t.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.TEXTURE_CUBE_MAP_POSITIVE_Z,t.TEXTURE_CUBE_MAP_NEGATIVE_Z],c=void 0,A=void 0;for(c=0;c<m.length;c++){A=m[c];t.texImage2D(A,n,i,f,u,0,i,o,null);t.bindTexture(e,E);t.texImage2D(A,n,i,i,o,a[c]);t.generateMipmap(e)}};function u(f){return{setAttribute1f:function r(t,e){var n=f.getAttribLocation(f.program,t);f.vertexAttrib1f(n,e)},setAttribute2f:function r(t,e,n){var i=f.getAttribLocation(f.program,t);f.vertexAttrib2f(i,e,n)},setAttribute3f:function r(t,e,n,i){var o=f.getAttribLocation(f.program,t);f.vertexAttrib3f(o,e,n,i)},setAttribute4f:function r(t,e,n,i,o){var a=f.getAttribLocation(f.program,t);f.vertexAttrib4f(a,e,n,i,o)},setAttribute1i:function r(t,e){var n=f.getAttribLocation(f.program,t);f.vertexAttrib1i(n,e)},setAttribute2i:function r(t,e,n){var i=f.getAttribLocation(f.program,t);f.vertexAttrib2i(i,e,n)},setAttribute3i:function r(t,e,n,i){var o=f.getAttribLocation(f.program,t);f.vertexAttrib3i(o,e,n,i)},setAttribute4i:function r(t,e,n,i,o){var a=f.getAttribLocation(f.program,t);f.vertexAttrib4i(a,e,n,i,o)},setUniform1f:function r(t,e){var n=f.getUniformLocation(f.program,t);f.uniform1f(n,e)},setUniform2f:function r(t,e,n){var i=f.getUniformLocation(f.program,t);f.uniform2f(i,e,n)},setUniform3f:function r(t,e,n,i){var o=f.getUniformLocation(f.program,t);f.uniform3f(o,e,n,i)},setUniform4f:function r(t,e,n,i,o){var a=f.getUniformLocation(f.program,t);f.uniform4f(a,e,n,i,o)},setUniform1i:function r(t,e){var n=f.getUniformLocation(f.program,t);f.uniform1i(n,e)},setUniform2i:function r(t,e,n){var i=f.getUniformLocation(f.program,t);f.uniform2i(i,e,n)},setUniform3i:function r(t,e,n,i){var o=f.getUniformLocation(f.program,t);f.uniform3i(o,e,n,i)},setUniform4i:function r(t,e,n,i,o){var a=f.getUniformLocation(f.program,t);f.uniform4i(a,e,n,i,o)},setUnifromMatrix2fv:function r(t,e){var n=f.getUniformLocation(f.program,t);f.uniformMatrix2fv(n,false,e)},setUnifromMatrix3fv:function r(t,e){var n=f.getUniformLocation(f.program,t);f.uniformMatrix3fv(n,false,e)},setUnifromMatrix4fv:function r(t,e){var n=f.getUniformLocation(f.program,t);f.uniformMatrix4fv(n,false,e)}}}function T(i){var o={byte:i.UNSIGNED_BYTE,short:i.UNSIGNED_SHORT};return{openDeep:function r(){i.enable(i.DEPTH_TEST);return this},points:function r(t,e,n){if(n){i.drawElements(i.POINTS,e,o[n],t)}else{i.drawArrays(i.POINTS,t,e)}return this},lines:function r(t,e,n){if(n){i.drawElements(i.LINES,e,o[n],t)}else{i.drawArrays(i.LINES,t,e)}return this},stripLines:function r(t,e,n){if(n){i.drawElements(i.LINE_STRIP,e,o[n],t)}else{i.drawArrays(i.LINE_STRIP,t,e)}return this},loopLines:function r(t,e,n){if(n){i.drawElements(i.LINE_LOOP,e,o[n],t)}else{i.drawArrays(i.LINE_LOOP,t,e)}return this},triangles:function r(t,e,n){if(n){i.drawElements(i.TRIANGLES,e,o[n],t)}else{i.drawArrays(i.TRIANGLES,t,e)}return this},stripTriangles:function r(t,e,n){if(n){i.drawElements(i.TRIANGLE_STRIP,e,o[n],t)}else{i.drawArrays(i.TRIANGLE_STRIP,t,e)}return this},fanTriangles:function r(t,e,n){if(n){i.drawElements(i.TRIANGLE_FAN,e,o[n],t)}else{i.drawArrays(i.TRIANGLE_FAN,t,e)}return this}}}var v=function r(t,e){var n=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=null,o=void 0;for(o=0;o<n.length;o++){try{i=t.getContext(n[o],e)}catch(r){}if(i)break}return i};function r(r,t){var m=v(r,t),n={painter:function r(){return T(m)},shader:function r(t,e){m.program=o(m,t,e);return n},buffer:function r(n){a(m,n);var u=void 0,E={write:function r(t,e){e=e||m.STATIC_DRAW;c(m,t,e,n);u=t;return E},use:function r(t,e,n,i,o,a){var f=u.BYTES_PER_ELEMENT;if(typeof t=="string")t=m.getAttribLocation(m.program,t);n=n||0;i=i||0;o=o||m.FLOAT;A(m,t,e,o,n*f,i*f,a);return E}};return E},texture:function f(u,r){u={"2d":m.TEXTURE_2D,cube:m.TEXTURE_CUBE_MAP}[u];var f=E(m,u,r);m.texParameteri(u,m.TEXTURE_MIN_FILTER,m.NEAREST);m.texParameteri(u,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE);m.texParameteri(u,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE);var o={useImage:function r(t,e,n,i){s(m,u,e,n,i,t);return o},useCube:function r(t,e,n,i,o,a){g(m,u,i,o,a,t,e,n,f)}};return o}};var e=u(m);for(var i in e){n[i]=e[i]}return n}var t=function r(){};t.core=r;if((typeof module==="undefined"?"undefined":_typeof(module))==="object"&&_typeof(module.exports)==="object"){module.exports=t}else{var e=window.image3D;t.noConflict=function(){if(window.image3D===t){window.image3D=e}return t};window.image3D=t}})();